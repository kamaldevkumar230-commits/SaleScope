<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Seller Profile | SaleScope</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
body {
    background: linear-gradient(135deg,#141e30,#243b55);
    font-family: "Poppins", sans-serif;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.profile-card {
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(15px);
    border-radius: 20px;
    width: 420px;
    padding: 35px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    color: white;
}

.profile-img-wrapper {
    position: relative;
    display: inline-block;
}

.profile-img {
    width: 140px;
    height: 140px;
    border-radius: 50%;
    object-fit: cover;
    border: 4px solid #00c9a7;
}

.camera-icon {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: #00c9a7;
    color: black;
    border-radius: 50%;
    padding: 6px 8px;
    cursor: pointer;
}

.info-box {
    text-align: left;
    margin-top: 25px;
}

.info-box strong {
    color: #00c9a7;
}

.btn-dashboard {
    background: #00c9a7;
    border: none;
    color: black;
    font-weight: 600;
    border-radius: 8px;
}

input[type="file"] {
    display: none;
}
</style>
</head>
<body>

<div class="profile-card" th:if="${currentUser != null}">

	<!-- Profile Image -->
	<div class="profile-img-wrapper">

	    <!-- Cloud Image -->
	    <img th:if="${currentUser.profileImage != null and !currentUser.profileImage.isEmpty()}"
	         th:src="${currentUser.profileImage}"
	         class="profile-img">

	    <!-- Default Image -->
	    <img th:if="${currentUser.profileImage == null or currentUser.profileImage.isEmpty()}"
	         th:src="@{/images/user.png}"
	         class="profile-img">

	    <i class="fa fa-camera camera-icon" onclick="triggerUpload()"></i>
	</div>

    <!-- Upload Form -->
    <form th:action="@{/seller/profile}" method="post" enctype="multipart/form-data">
        <input type="file" id="fileInput" name="profileImage" accept="image/*"
               onchange="this.form.submit()">
    </form>

    <h4 class="mt-3 fw-bold" th:text="${currentUser.name}"></h4>
    <p class="text-info" th:text="${currentUser.role}"></p>

    <hr>

    <div class="info-box">
        <p><strong>Email:</strong> <span th:text="${currentUser.email}"></span></p>
        <p><strong>Seller ID:</strong> <span th:text="${currentUser.id}"></span></p>
    </div>

    <a th:href="@{/seller/dashboard}" class="btn btn-dashboard mt-3 px-4">
        ← Back to Dashboard
    </a>

</div>

<div class="profile-card text-center" th:if="${currentUser == null}">
    <h4>⚠ Session Expired</h4>
    <a th:href="@{/login}" class="btn btn-dashboard mt-3">Login Again</a>
</div>

<script>
function triggerUpload() {
    document.getElementById("fileInput").click();
}
</script>

</body>
</html>